\section{Misure}
\begin{itemize}
\item Precision
\item MRR
\end{itemize}
\subsubsection{Precision}
\textbf{la precisione è definita come il numero di documenti attinenti recuperati da una ricerca diviso il numero totale di documenti recuperati dalla stessa ricerca,
la precisione è la frazione di documenti attinenti che sono stati trovati
In un processo di classificazione statistica, la precisione per una classe è il numero di veri positivi (il numero di oggetti etichettati correttamente come appartenenti alla classe) diviso il numero totale di elementi etichettati come appartenenti alla classe (la somma di veri positivi e falsi positivi, che sono oggetti etichettati erroneamente come appartenenti alla classe).
In un processo di classificazione, i termini vero positivo, vero negativo, falso positivo e falso negativo sono usati per confrontare la classificazione di un oggetto (l’etichetta di classe assegnata all’oggetto da un classificatore) con la corretta classificazione desiderata (la classe a cui in realtà appartiene l’oggetto).}
$$
Precision =\frac{T_P}{T_P+F_P}
$$
In particolare, nella fase sperimentale del progetto sono state calcolate 4 tipologie di precisioni:
\begin{itemize}
\item microprecision
\item microprecision epurata
\item macroprecision
\item macroprecision epurata
\end{itemize}
Le versioni epurate delle precisioni calcolate vanno
\subsubsection{MRR}
Il Mean Reciprocal Rank (MRR) è un indice statistico per valutare un processo che produce una lista di possibili risposte ad una interrogazione (query), ordinate per probabilità di correttezza.

\begin{equation}
MRR = \frac{1}{|Q|}\sum_{i=1}^{Q}{\frac{1}{Rank_i}}
\end{equation}

\label{Measure}

\subsection{Distanze}

Il nostro recommender system è stato testato su quattro diverse misure di distanza.
Le prime due sono descritte in \citet{passant2010measuring}, le altre due è stata realizzata \emph{ex novo} e rappresentano una nuova visione pesata delle precedenti.


\subsubsection{Passant Direct}
\label{PassantD}
La distanza diretta. Indica il numero di archi diretti che collegano i film $a$ e $b$. Tenendo conto che il grafo preso in considerazione è orientato, vanno presi gli archi in entrambe le direzioni.

In maniera formale, definita $$C_{d}(f_a,f_b) = \left\vert \left\{ e \in Edges \  | \  (f_a \xrightarrow{~e~} f_b ) \right\} \right\vert$$ la formula della distanza completa sarà quindi:

%\begin{figure}[htbp]
%  \centering
%    \label{LDSD}
%    \begin{equation}
%        P_{d}(r_{a},r_{b}) = \frac{1} {1+C_{d}(n,r_{a},r_{b})+C_{d}(n,r_{b},r_{a})}
%    \end{equation}
%      \caption{LDSD Distance}
%      \label{LDSD1}
%\end{figure}

    \begin{equation}
        P_{d}(f_{a},f_{b}) = \frac{1} {1+C_{d}(f_{a},f_{b})+C_{d}(f_{b},f_{a})}
    \end{equation}

\subsubsection{Passant Combinated}
\label{PassantC}

La distanza combinata compone la precedente distanza diretta con una misura
(PassantI) che prende in considerazione i percorsi che uniscono due film
attraverso un film in comune.

PassantI restituisce un valore che indica il numero di archi che
mettono in relazione i due film attraverso dei film in comune.

Formalmente, definiti:
$$C_{io}(f_a,f_b) = \left\vert \left\{ f \  | \  (f_a \xrightarrow{~e~} f ) \wedge (f_b \xrightarrow{~e~} f) \right\} \right\vert$$
$$C_{ii}(f_a,f_b) = \left\vert \left\{ f \  | \  ( f \xrightarrow{~e~} f_a ) \wedge ( f \xrightarrow{~e~} f_b) \right\} \right\vert$$
$$\text{con} \ e \in Edges  , \qquad f_a,f_b,f \in Films $$

la formula indiretta di Passant è:
    \begin{equation}
        P_i(f_{a},f_{b}) = \frac{1} {1+C_{io}(f_{a},f_{b})+C_{ii}(f_{a},f_{b})}
    \end{equation}

La formula combinata sarà:

    \begin{equation}
P_{c}(f_{a},f_{b}) = \frac{1} {1+C_{d}(f_{a},f_{b})+C_{d}(f_{b},f_{a})+C_{io}(f_{a},f_{b})+C_{ii}(f_{a},f_{b})}
    \end{equation}


\subsubsection{Passant Direct Weighted}
\label{PassantDW}
La distanza diretta pesata, realizzata da noi, è una variazione della distanza diretta descritta in \ref{PassantD} che, invece che contare il numero di archi, somma i pesi di ciascun arco.

In maniera formale:

\begin{equation}
P_{dw}(f_a,f_b) = \sum\limits_{e \in ED}^{}{w(e)}
\end{equation}

con~~$ \qquad ED_{f_a,f_b} = \left\{ e \in Edges \quad\big\vert\quad f_a \xrightarrow{~e~} f_b \right\}$\footnote{Ricordando che nel nostro caso, trattandosi di un multigrafo, possono esserci più archi a collegare $f_a$ e $f_b$}

\subsubsection{Passant Combinated Weighted}
La distanza combinata pesata utilizza la precedente diretta pesata
\ref{PassantDW} insieme con la distanza che prende in considerazione i percorsi che uniscono due film attraverso un film in comune.

La distanza combinata, quindi, prende in considerazione sia gli archi diretti che gli archi indiretti (quelli che uniscono i film $a$ e $b$ passando da un film $c$ comune, come descritto in \ref{PassantC}). In questo caso, tuttavia, tutti gli archi sono pesati e la distanza corrisponde ad una sommatoria di pesi. In maniera formale, dati
$$EIO_{f_a,f_b} = \left\{ (e_1, e_2) \in Edges \quad\big\vert\quad f_a \xrightarrow{e_1} f_c \wedge f_b \xrightarrow{e_2} f_c \wedge label(e_1)=label(e_2) \right\}$$
$$EII_{f_a,f_b} = \left\{ p \in Paths \quad\big\vert\quad f_a \xrightarrow{e} f_c \wedge f_b \xrightarrow{e} f_c \right\}$$

\begin{equation}
CW_{io}(f_a,f_b) = \sum\limits_{(e_1,e_2) \in EIO_{f_a,f_b}^{}}^{}{w(e_1)*w(e_2)}
\end{equation}
\begin{equation}
CW_{ii}(f_a,f_b) = \sum\limits_{(e_1,e_2) \in EII_{f_a,f_b}^{}}^{}{w(e_1)*w(e_2)}
\end{equation}


\begin{equation}
P_{cw}(f_a,f_b) = \sum\limits_{(e_1,e_2) \in EII_{f_a,f_b}^{}}^{}{w(e_1)*w(e_2)}
\end{equation}

\subsection{Profili}

\subsubsection{Simple}
Il profilo coincide con l'insieme dei film valutati positivamente (4 e 5 considerati in egual misura)

\subsubsection{Simple Negative}

I film valutati 4 e 5 sono nell'insieme dei positivi. I film valutati 1 e 2 sono nell'insieme dei negativi.


\subsubsection{Voted Nostra}


Il profilo è l'insieme dei film visti, pesati secondo la formula:
votazioni dei film visti - voto medio dei film.

\subsubsection{Voted Musto}

Il profilo è l'insieme dei film visti, pesati secondo la formula:
Voto massimo + 1 - voto del film visto.

